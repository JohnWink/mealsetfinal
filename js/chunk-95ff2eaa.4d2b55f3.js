(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95ff2eaa"],{1603:function(t,e,a){},1681:function(t,e,a){},1913:function(t,e,a){"use strict";var r=a("23e7"),s=a("857a"),o=a("af03");r({target:"String",proto:!0,forced:o("fontsize")},{fontsize:function(t){return s(this,"font","size",t)}})},"3e57":function(t,e,a){},4276:function(t,e,a){},"4f23":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"400","max-height":"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-img",t._g({staticClass:"avatar",staticStyle:{border:"4px solid rgba(92, 107, 192, 0.82)"},attrs:{src:t.avatar,width:"80",height:"80"}},r))]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"#5C6BC0"}},[a("v-row",[a("v-col",{staticClass:"text-left mt-2 ml-6 title1"},[a("v-toolbar-title",[t._v("Perfil")])],1),a("v-col",{staticClass:"text-right mt-2"},[a("v-btn",{attrs:{color:"#ffffff",text:"",right:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1)],1),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",{staticClass:"text-center"},[a("v-col",{attrs:{align:"center",justify:"center"}},[a("v-img",{staticClass:"avatar",attrs:{src:t.loggedUser.avatar,width:"200px",height:"200px"}})],1),a("v-col",{staticClass:"text-left"},[a("v-text-field",{attrs:{label:"username",color:"#5C6BC0",placeholder:"",value:t.loggedUser.username,outlined:"",disabled:""}}),a("v-text-field",{attrs:{label:"Email",color:"#5C6BC0",placeholder:"",value:t.loggedUser.email,outlined:"",disabled:""}}),a("v-text-field",{attrs:{label:"Contact",color:"#5C6BC0",placeholder:"",value:t.loggedUser.contact,outlined:""},model:{value:t.loggedUser.contact,callback:function(e){t.$set(t.loggedUser,"contact",e)},expression:"loggedUser.contact"}}),a("v-text-field",{attrs:{label:"Password Atual",color:"#5C6BC0",placeholder:"Password Anterior...",outlined:"",disabled:t.alter,type:"password"},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),a("v-text-field",{attrs:{label:"Nova Password",color:"#5C6BC0",placeholder:"Nova Password..",outlined:"",disabled:t.alter,type:"password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),a("v-file-input",{attrs:{label:"Novo Avatar",filled:"","prepend-icon":"mdi-camera",outlined:"",color:"#5C6BC0"},model:{value:t.newAvatar,callback:function(e){t.newAvatar=e},expression:"newAvatar"}})],1)],1),a("v-card-actions",{staticClass:"text-right mr-3"},[a("v-col",[a("v-btn",{attrs:{color:"#f7c23e",dark:""},on:{click:t.submit}},[t._v("Guardar")])],1)],1)],1)],1)],1)},s=[],o=(a("ac1f"),a("5319"),a("96cf"),a("1da1")),n={name:"perfil",data:function(){return{dialog:!1,oldAvatar:"",oldPassword:"",oldChecker:"",newPassword:"",newAvatar:[],alter:!1,show:!0,loggedUser:[],avatar:""}},methods:{submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$fire({title:"Atualizando Perfil",allowEscapeKey:!1,allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1}),!t.$refs.form.validate()){e.next=15;break}if(a="",0==t.newAvatar.length){e.next=6;break}return e.next=6,t.$store.dispatch("uploadAvatar",{idUser:t.loggedUser.idUser,avatar:t.newAvatar}).then((function(){r=t.$store.getters.feedbackChecker,a=200==r?"success":404==r?"O utilizador não foi encontrado":400==r?"A imagem é inválida":"Erro interno"})).catch((function(t){console.log("Error",t),a="erro interno"}));case 6:if(""==t.newPassword&&""==t.oldPassword){e.next=14;break}if(""==t.newPassword||""==t.oldPassword){e.next=13;break}return console.log("new password request"),e.next=11,t.$store.dispatch("newPassword",{idUser:t.loggedUser.idUser,password:t.oldPassword,newPassword:t.newPassword}).then((function(){r=t.$store.getters.feedbackChecker,a=200==r?"password success":404==r?"O utilizador foi encontrado":400==r?"Conteudo vazio":"Erro interno"})).catch((function(t){console.log("Error",t),a="erro interno"}));case 11:e.next=14;break;case 13:t.$fire({type:"error",title:"Erro",text:"Para alterar a password por favor preencha a password atual e nova password "}).then((function(t){t.value&&location.reload()}));case 14:"success"==a?(t.$fire({type:"success",title:"Prefil Editado!",confirmButtonText:"Confirmar"}).then((function(t){t.value&&location.reload()})),t.alter=!0,t.show=!1):"password success"==a?t.$fire({type:"success",title:"Prefil Editado!",text:"A confirmação da password foi enviada para o seu email",confirmButtonText:"Confirmar"}).then((function(t){t.value&&location.reload()})):t.$fire({type:"error",title:"Oops!!",text:a}).then((function(t){t.value&&location.reload()}));case 15:case"end":return e.stop()}}),e)})))()},update:function(){this.email=this.$store.state.loggedUser.email,this.oldAvatar=this.$store.state.loggedUser.avatar,this.$router.replace("/landingPage")}},created:function(){this.loggedUser=JSON.parse(sessionStorage.getItem("loggedUser")),null==this.loggedUser.avatar?(this.avatar="https://utulsa.edu/wp-content/uploads/2018/08/generic-avatar.jpg",console.log("picking logged user avatar")):(this.avatar=this.loggedUser.avatar,console.log("picking default  avatar")),this.email=this.$store.state.loggedUser.email,this.oldAvatar=this.$store.state.loggedUser.avatar}},i=n,l=(a("ec64"),a("2877")),c=a("6544"),u=a.n(c),d=a("8336"),f=a("b0af"),g=a("99d9"),h=a("62ad"),v=a("a523"),p=a("169a"),m=a("23a7"),w=a("4bd4"),x=a("132d"),b=a("adda"),C=a("0fd9"),y=a("8654"),k=a("71d9"),A=a("2a7f"),R=Object(l["a"])(i,r,s,!1,null,null,null);e["a"]=R.exports;u()(R,{VBtn:d["a"],VCard:f["a"],VCardActions:g["a"],VCol:h["a"],VContainer:v["a"],VDialog:p["a"],VFileInput:m["a"],VForm:w["a"],VIcon:x["a"],VImg:b["a"],VRow:C["a"],VTextField:y["a"],VToolbar:k["a"],VToolbarTitle:A["a"]})},"728b":function(t,e,a){t.exports=a.p+"img/landingPageImg.3185beec.jpg"},"841c":function(t,e,a){"use strict";var r=a("d784"),s=a("825a"),o=a("1d80"),n=a("129f"),i=a("14c3");r("search",1,(function(t,e,a){return[function(e){var a=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,a):new RegExp(e)[t](String(a))},function(t){var r=a(e,t,this);if(r.done)return r.value;var o=s(t),l=String(this),c=o.lastIndex;n(c,0)||(o.lastIndex=0);var u=i(o,l);return n(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},"8efa":function(t,e,a){"use strict";var r=a("4276"),s=a.n(r);s.a},a844:function(t,e,a){"use strict";a("a9e3");var r=a("5530"),s=(a("1681"),a("8654")),o=a("58df"),n=Object(o["a"])(s["a"]);e["a"]=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(r["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},s["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=s["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){s["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},b835:function(t,e,a){"use strict";var r=a("1603"),s=a.n(r);s.a},d115:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"landingPage"},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-img",{staticClass:"grey lighten-3",attrs:{src:a("728b"),"max-height":"300px",gradient:"to top right, rgba(100,115,201,.19), rgba(25,32,72,.5)"}},[r("v-row",{attrs:{align:"start",justify:"center"}},[r("v-col",{attrs:{cols:"1"}},[r("navBar")],1),r("v-col",{attrs:{cols:"3",sm:"2","offset-sm":"6",offset:"6"}},[r("perfil")],1),r("v-col",{attrs:{cols:"3",sm:"1","offset-sm":"0",offset:"7"}},[r("logout")],1)],1),r("v-row",{staticClass:"pl-12 ml-12"},[r("p",{staticClass:"font-weight-bold white--text text-center",style:t.fontsize,attrs:{id:"header-text1"}},[t._v("Restaurantes")])])],1)],1),r("v-row",{staticClass:"pl-12 ml-12 mt-2"},[r("v-col",{attrs:{cols:"10",sm:"8"}},[r("v-textarea",{staticClass:"mx-2 mt-10",attrs:{"prepend-icon":"fas fa-search",label:"Pesquisa",rows:"1","auto-grow":"",clearable:"","single-line":"",color:"#5C6BC0"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-col",{attrs:{cols:"10",sm:"3"}})],1),r("br"),r("br"),r("div",[r("v-row",{staticClass:"mx-2",attrs:{justify:"center",align:"center"}},t._l(t.sortedRestaurants,(function(t){return r("v-col",{key:t.id,staticClass:"mb-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("RestaurantCards",{attrs:{restaurant:t}})],1)})),1)],1),r("footerVue")],1)},s=[],o=(a("4de4"),a("caad"),a("b0c0"),a("ac1f"),a("2532"),a("841c"),a("1913"),a("96cf"),a("1da1")),n=a("da1d"),i=a("acd8"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl-12 ml-12 mr-2"},[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("router-link",{attrs:{to:{name:"restaurant",params:{id:t.restaurant.idRestaurant}}}},[a("v-card",{staticClass:"mx-auto cards",attrs:{"max-height":"500","max-width":"500",elevation:r?16:2}},[a("v-img",{attrs:{"max-width":"500px","max-height":"250px",src:t.restaurant.coverFoto}}),a("v-row",{staticClass:"mb-7 mx-2"},[a("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[a("v-title",{staticClass:" font-weight-bold nameTitle"},[t._v(t._s(t.restaurant.name))]),a("br"),t._v(" "),a("i",{staticClass:"fas fa-edit mt-3"}),t._v(" "+t._s(t.restaurant.description)+" ")],1),a("v-col",{staticClass:"text-right"},[a("p",{staticClass:"font-weight-bold",staticStyle:{"margin-right":"25px","margin-top":"10%"}},[t._v(" "+t._s(t.ratingAvg)+" "),a("v-icon",{attrs:{medium:"",color:"yellow darken-1"}},[t._v("fas fa-star")])],1)])],1)],1)],1)]}}])})],1)},c=[],u=(a("7db0"),{name:"RestaurantCards",props:["restaurant"],data:function(){return{checker:"border: solid red",distance:"",travelDuration:"",map:"",myPos:"",distanceValue:"",ratingAvg:0}},methods:{},mounted:function(){var t=this,e=JSON.parse(sessionStorage.getItem("ratings")),a=[];console.log("restaurant ratings: ",a),e.find((function(e){e.idRestaurant==t.restaurant.idRestaurant&&a.push(e)}));for(var r=0;r<a.length;r++)this.ratingAvg=+a[r].value;this.ratingAvg?this.ratingAvg=this.ratingAvg/a.length:this.ratingAvg=0}}),d=u,f=(a("8efa"),a("2877")),g=a("6544"),h=a.n(g),v=a("b0af"),p=a("62ad"),m=a("16b7"),w=a("f2e7"),x=a("58df"),b=a("d9bd"),C=Object(x["a"])(m["a"],w["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):(Object(b["c"])("v-hover should only contain a single element",this),t)):(Object(b["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var t}}),y=a("132d"),k=a("adda"),A=a("0fd9"),R=Object(f["a"])(d,l,c,!1,null,null,null),P=R.exports;h()(R,{VCard:v["a"],VCol:p["a"],VHover:C,VIcon:y["a"],VImg:k["a"],VRow:A["a"]});var $=a("69a2"),V=a("4f23"),I={name:"landingPage",components:{NavBar:n["a"],footerVue:i["a"],RestaurantCards:P,Logout:$["a"],perfil:V["a"]},data:function(){return{filters:["Melhor Rating","De A a Z","Mais Perto"],restaurants:[],fontsize:" ",searchValue:"",filterValue:"",search:"",ratings:[]}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("resize",t.mobileAjust),t.mobileAjust();case 2:case"end":return e.stop()}}),e)})))()},beforeCreate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getRestaurants",{}).then((function(){t.restaurants=t.$store.getters.getRestaurants})).catch((function(t){console.log("Error in getting restaurants in landing page: ",t)}));case 2:return e.next=4,t.$store.dispatch("get_ratings").then((function(){console.log("ratings created")})).catch((function(t){console.log("error in getting restaurant ratings: ",t)}));case 4:case"end":return e.stop()}}),e)})))()},computed:{sortedRestaurants:function(){var t=this;return"Melhor Rating"==this.filterValue?this.$store.getters.getRestaurantsByRating:"De A a Z"==this.filterValue?this.$store.getters.getRestaurantByAlphOrder:"Mais Perto"==this.filterValue?this.$store.getters.getRestaurantsByDistance:this.$store.getters.getRestaurantsById,""!=this.search?this.restaurants.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())})):this.restaurants}},methods:{mobileAjust:function(){var t="font-size:400%;";window.innerWidth<600&&(t+="font-size:280%;",window.innerWidth<400&&(t="font-size:230%;")),this.fontsize=t},sortRestaurantByRatingMethod:function(t,e){var a=t.evaluation,r=e.evaluation;return a>r?-1:r>a?1:0},getCurrentLocation:function(){var t=this;navigator.geolocation?navigator.geolocation.watchPosition((function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};t.$store.commit("ADD_CURRENT_LOCATION",{location:a})}),(function(t){alert(t.message)})):alert("error on navigator")}}},_=I,B=(a("b835"),a("a844")),U=Object(f["a"])(_,r,s,!1,null,null,null);e["default"]=U.exports;h()(U,{VCol:p["a"],VImg:k["a"],VRow:A["a"],VTextarea:B["a"]})},ec64:function(t,e,a){"use strict";var r=a("3e57"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-95ff2eaa.4d2b55f3.js.map